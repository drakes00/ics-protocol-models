digraph {
    rankdir=LR;

    state_NotPaid   -> state_Paid      [label="read MoneySensor.Paid 1"];
    state_NotPaid   -> state_Selected  [label="read DrinkSelector.Selected 1"];
    state_Paid      -> state_DrinkOk   [label="read DrinkSelector.Selected 1"];
    state_Selected  -> state_DrinkOk   [label="read MoneySensor.Paid 1"];
    state_DrinkOk   -> state_CashOut   [label="write MonerSensor.CashOut 1"];
    state_DrinkOk   -> state_Delivered [label="write DrinkSelector.Deliver 1"];
    state_CashOut   -> state_NotPaid   [label="write DrinkSelector.Deliver 1"];
    state_Delivered -> state_NotPaid   [label="write MonerSensor.CashOut 1"];

    {rank=same; state_Selected, state_Paid, state_CashOut, state_Delivered}
}
